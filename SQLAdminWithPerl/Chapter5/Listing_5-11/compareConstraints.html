<HTML>
<HEAD>
<TITLE>compareConstraints - Compare two tables for any difference in their constraints</TITLE>
<LINK REV="made" HREF="mailto:">
</HEAD>

<BODY>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH=100%>
<TR><TD CLASS=block VALIGN=MIDDLE WIDTH=100% BGCOLOR="#cccccc">
<FONT SIZE=+1><STRONG><P CLASS=block>&nbsp;compareConstraints - Compare two tables for any difference in their constraints</P></STRONG></FONT>
</TD></TR>
</TABLE>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
	<LI><A HREF="#version">VERSION</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P>compareConstraints - Compare two tables for any difference in their constraints</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<PRE>
 cmd&gt;perl compareConstraints.pl</PRE>
<P>For illustration purposes, the server instances, the databases, and the tables are all 
hard coded in the script. You can esily modify the script to accept a config file or 
retrieve the server info from the command line.</P>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>This script shows how to compare two tables for any difference in their constraints. The types of 
constraints include:</P>
<UL>
<LI><STRONG><A NAME="item_Primary_Keys">Primary Keys</A></STRONG><BR>

<LI><STRONG><A NAME="item_Unique_Keys">Unique Keys</A></STRONG><BR>

<LI><STRONG><A NAME="item_Foreign_Keys">Foreign Keys</A></STRONG><BR>

<LI><STRONG><A NAME="item_Check_Constraints">Check Constraints</A></STRONG><BR>

<LI><STRONG><A NAME="item_Default_Constraints">Default Constraints</A></STRONG><BR>

</UL>
<P>The approach is to (1) retrieve the information about the constraints of each table using SQL-DMO, (2)
store the information in a Perl data structure, and (3) compare the two data structures.</P>
<P>The script relies on the <EM>dbaGetTableConstraints()</EM> function imported from the module SQLDBA::SQLDMO
to obtain the information on the table constraints. The script also imports two utility 
functions, <EM>dbaSetDiff()</EM> and <EM>dbaSetCommon()</EM>, to help with comparing the data structures. 
These two functions are imported from the module SQLDBA::Utility.</P>
<P>The structure of this script is similr to that of the script <EM>compareColumns.pl</EM> in Listing 5-1 
or that of the script <EM>compareIndexes.pl</EM> in Listing 5-4.</P>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Linchi Shea</P>
<P>
<HR>
<H1><A NAME="version">VERSION</A></H1>
<PRE>
 2003.01.27</PRE>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH=100%>
<TR><TD CLASS=block VALIGN=MIDDLE WIDTH=100% BGCOLOR="#cccccc">
<FONT SIZE=+1><STRONG><P CLASS=block>&nbsp;compareConstraints - Compare two tables for any difference in their constraints</P></STRONG></FONT>
</TD></TR>
</TABLE>

</BODY>

</HTML>
